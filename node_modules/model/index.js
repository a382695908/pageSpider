/**
 * model层
 * @author xianliezhao
 */
var mongoose = require('mongoose');

/**
 * 创建一个mongodb的连接
 * 返回数据连接的db,默认已经创建了size为5的连接池
 * @param mongoConfig
 */
var createConnection = function (mongoConfig) {
    // 创建连接
    var conn = mongoose.createConnection(
            'mongodb://' +
            mongoConfig.host + ':' +
            mongoConfig.port + '/' +
            mongoConfig.dbName);

    // 连接成功
    conn.on('open', function (error, result) {
        console.log('mongodb connect success');
    });

    // 连接失败
    conn.on('error', function (error, result) {
        console.log('mongodb connect failed!Error detail: ', error);
    });
    return conn;
};

exports.createConnection = createConnection;
exports.mongoose = mongoose;